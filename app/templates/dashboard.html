{% extends "components/base.html" %} {% block title %} Mindsight - Dashboard{%
endblock %} {% block styles %}
<link rel="stylesheet" href="/static/css/dashboard.css" />
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
{% endblock %} {% block content %}

<style>
  .progress-bar-container {
    position: relative;
    margin-bottom: 10px;
  }
  
  .progress-bar {
    position: absolute;
    bottom: 0;
    left: 0;
    background-color: #307fe2;
    color: white;
    padding: 5px;
  }
  
  .progress-bar-underlay {
    background-color: black;
    width: 100%;
    padding: 5px;
  }
</style>

<div class="right">
  <div class="column1">
    <div class="experience-container">
        <span class="title" id="experience">
          <div>Experiences</div>
          <div class="back-button">
            <a href="{{ url_for ('experiences')}}">
                <img src="/static/SVG/back_button.svg"/>
            </a>
          </div>
        </span>

      <div id="chart"> </div>
      
      <canvas id="progressChart" width="400" height="200"></canvas>
    </div>
  </div>
  <div class="column2">
    <div class="college-container">
      <span class="title" id="college">
        <div>Level Summaries</div>
      </span>
      <canvas id="myChart2"></canvas>
    </div>
    <div class="row">
      <div class="campus-container">
        <span class="title" id="campus">
          <div>Campus</div>
          <div class="back-button">
            <a href="{{ url_for ('campus')}}">
                <img src="/static/SVG/back_button.svg"/>
            </a>
          </div>
        </span>
        <canvas id="myChart3" height="100" width="100"></canvas>
      </div>
      <div class="religion-container">
        <span class="title" id="religion">
          <div>Religion</div>
          <div class="back-button">
            <a href="{{ url_for ('religion')}}">
                <img src="/static/SVG/back_button.svg"/>
            </a>
          </div>
        </span>
        <canvas id="myChart4" height="100" width="100"></canvas>
      </div>
    </div>
  </div>
  <div class="column3">
    <div class="nature-container">
      <span class="title" id="nature">
        <div>Brief description of Concerns</div>
        <div class="back-button">
          <a href="{{ url_for ('nature_of_concern')}}">
              <img src="/static/SVG/back_button.svg"/>
          </a>
        </div>
      </span>
      <canvas id="myChart5"></canvas>
    </div>
    <div class="identity-container">
      <span class="title" id="identity">
        <div>Identity</div>
        <div class="back-button">
          <a href="{{ url_for ('identity')}}">
              <img src="/static/SVG/back_button.svg"/>
          </a>
        </div>
      </span>
      <canvas id="myChart6"></canvas>
    </div>
  </div>
  </div>
</div>

<script src="{{ url_for('static', filename='javascript/cdn/chartjs.js') }}"></script>
<script src="{{ url_for('static', filename='javascript/dashboard.js') }}"></script>

<script>
  const data = {{ data_json | tojson | safe }};

  function createProgressBar(label, count) {
    const container = document.createElement('div');
    container.classList.add('progress-bar-container');
  
    const labelElement = document.createElement('div');
    labelElement.classList.add('progress-bar-label');
    labelElement.textContent = label;
    container.appendChild(labelElement);
  
    const countElement = document.createElement('div');
    countElement.classList.add('progress-bar-count');
    countElement.textContent = count;
    container.appendChild(countElement);
  
    const maxProgressBarWidth = 100;
  
    const progressBarWidth = Math.min(count * 4, maxProgressBarWidth);
    const progressBar = document.createElement('div');
    progressBar.classList.add('progress-bar');
    progressBar.style.width = `${progressBarWidth}%`;
    container.appendChild(progressBar);
  
    const progressBarUnderlay = document.createElement('div');
    progressBarUnderlay.classList.add('progress-bar-underlay');
    container.appendChild(progressBarUnderlay);
  
    return container;
  }
  

  function renderChart(data) {
    const chartContainer = document.getElementById('chart');
  
    chartContainer.innerHTML = '';
  
    const sortedData = Object.entries(data).sort((a, b) => b[1] - a[1]);
  
    sortedData.forEach(([label, count]) => {
      const progressBar = createProgressBar(label, count);
      chartContainer.appendChild(progressBar);
    });
  }
  
  renderChart(data);
</script>




{% endblock %}
