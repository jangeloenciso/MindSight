{% extends "components/base.html" %} {% block title %} Mindsight - Analytics{%
endblock %} {% block styles %}
<link rel="stylesheet" href="/static/css/analytics.css" />
{% endblock %} {% block content %}
<div class="right">
  <div class="main-content">
    <span id="analytics">Analytics</span>
    <div class="semester-content">
      <div class="semester-left">
        <div class="first-Semester">
          <select id="first-semester">
            <option value="2021">2021</option>
            <option value="2022">2022</option>
            <option value="2023">2023</option>
            <option value="2024">2024</option>
          </select>
        </div>
        <div class="compare">
          <img src="/static/compare.png" />
        </div>
        <div class="second-semester">
          <select id="second-semester">
            <option value="2021">2021</option>
            <option value="2022">2022</option>
            <option value="2023">2023</option>
            <option value="2024">2024</option>
          </select>
        </div>
      </div>
      <div class="metrics-button">
        <a href="{{ url_for ('metrics') }}">
          <button class="metrics">In-depth Analysis</button>
        </a>
      </div>
    </div>

    <div class="analytics-container">
      <section class="col-1">
        <article>Experiences</article>
        <article>Concern</article>
      </section>
      <section class="col-2">
        <article>Levels</article>
        <article>Campus</article>
        <article>Identity</article>
      </section>
    </div>
  </div>
</div>

<script src="{{ url_for('static', filename='javascript/cdn/chartjs.js') }}"></script>
<script src="{{ url_for('static', filename='javascript/analytics.js') }}"></script>
<script src="{{ url_for('static', filename='javascript/analytics2.js') }}"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Attach event listeners to both select elements
    document
      .getElementById("first-semester")
      .addEventListener("change", function () {
        console.log("changed");
        updateCharts();
      });

    document
      .getElementById("second-semester")
      .addEventListener("change", function () {
        updateCharts();
      });

    // Fetch and generate charts initially
    updateCharts();
  });

  function updateCharts() {
    let selectedYear1 = document.getElementById("first-semester").value;
    let selectedYear2 = document.getElementById("second-semester").value;

    // Log the selected years for testing
    console.log("Selected Year 1:", selectedYear1);
    console.log("Selected Year 2:", selectedYear2);

    fetchData(1, selectedYear1, selectedYear2);
    fetchData(2, selectedYear1, selectedYear2);
    fetchData(3, selectedYear1, selectedYear2);
    fetchData(4, selectedYear1, selectedYear2);
    fetchData(5, selectedYear1, selectedYear2);
  }
</script>
{% endblock %}
